sudo: required

language: python
python: 
  - "3.6.1"
install: "pip install -r requirements.txt"

services:
  - docker

before_install:
-  docker-compose build

script:
  - docker-compose up -d
  - docker-compose run web ./manage.py makemigrations
  - docker-compose run web ./manage.py migrate
  - docker-compose run web coverage run ./manage.py test
  - docker-compose run web coverage report

after_success:
  - docker-compose run web coveralls